# Firebase App Hosting configuration for AdvocatePro (Next.js)
# Docs: https://firebase.google.com/docs/app-hosting

# -----------------------------------------------------------
# Cloud Run service settings for the backend that powers
# server-side rendering (SSR) & API routes.
# -----------------------------------------------------------
runConfig:
  # Scale to zero when not in use to save costs.
  minInstances: 0
  # Increase this if you anticipate heavy traffic.
  # maxInstances: 20
  # Concurrency defines how many requests a single instance can handle.
  concurrency: 80
  # CPU and memory for each instance (modify as needed).
  cpu: 1
  memoryMiB: 512

# -----------------------------------------------------------
# Environment variables & secrets
# -----------------------------------------------------------
#   • Variables marked BUILD are available during `next build`.
#   • Variables marked RUNTIME are exposed to the Cloud Run service.
#     (Next.js automatically picks them up when they start with NEXT_PUBLIC_*)
#   • For sensitive values use Secret Manager and reference the secret name.
# -----------------------------------------------------------
env:
  # Example public Firebase web-SDK config – replace with real values or
  # convert to secrets if you prefer.
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    value: "AIzaSyD6OJWg2YSFiXqrqBoRH-S3g_CZqJCsXeA"
    availability: [BUILD, RUNTIME]

  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: "advocate-empower.firebaseapp.com"
    availability: [BUILD, RUNTIME]

  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: "advocate-empower"
    availability: [BUILD, RUNTIME]

  # Example of referencing a secret (recommended for service account JSON).
  # First create the secret with:
  #   firebase apphosting:secrets versions:add FIREBASE_SERVICE_ACCOUNT_JSON --data-file=serviceAccount.json
  # Then uncomment the block below.
  # - variable: FIREBASE_SERVICE_ACCOUNT_JSON
  #   secret: FIREBASE_SERVICE_ACCOUNT_JSON
  #   availability: [RUNTIME]

  # Stripe configuration
  - variable: NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
    value: "pk_live_51RhSLlAHtQyvoAZvp180MdJUpy1zaHAip4Dah86LrThISYypFsZKu9MHiB9L0qWb6PypduSXW09XterzJgIwB7Xa00pLTJ2V51"
    availability: [BUILD, RUNTIME]

  - variable: STRIPE_SECRET_KEY
    secret: STRIPE_SECRET_KEY
    availability: [RUNTIME]

  # Force production mode for Next.js
  - variable: NODE_ENV
    value: "production"
    availability: [BUILD, RUNTIME]
